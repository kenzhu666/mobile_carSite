{"remainingRequest":"/Users/kenzhu/Desktop/coding/car/mobile_car/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kenzhu/Desktop/coding/car/mobile_car/src/components/sellform/lease.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kenzhu/Desktop/coding/car/mobile_car/src/components/sellform/lease.vue","mtime":1563329777119},{"path":"/Users/kenzhu/Desktop/coding/car/mobile_car/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1560155424582},{"path":"/Users/kenzhu/Desktop/coding/car/mobile_car/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1560155422753},{"path":"/Users/kenzhu/Desktop/coding/car/mobile_car/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1560155424582},{"path":"/Users/kenzhu/Desktop/coding/car/mobile_car/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1560155425215}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { firestore } from \"../firebase/firestore\";\nimport firebase from \"firebase\";\nimport db from \"../firebase/firebaseinit\";\n\nexport default {\n  data() {\n    return {\n      car_id: null,\n      car_Vin: null,\n      car_engine: null,\n      car_fpay: null,\n      car_mile: null,\n      car_month: null,\n      car_mpay: null,\n      car_type: null,\n      contact_location: null,\n      contact_name: null,\n      contact_phone: null,\n      contact_time: null,\n\n      display_brand: \"请选择\",\n      display_year: \"请选择\",\n      display_gas: \"请选择\",\n      display_automode: \"请选择\",\n      display_seats: \"请选择\",\n\n      isVisible1: false,\n      isVisible2: false,\n      isVisible3: false,\n      isVisible4: false,\n      isVisible5: false,\n\n      brand: [{ name: \"benz\" }, { name: \"bmw\" }, { name: \"audi\" }],\n      year: [\n        { name: \"2019\" },\n        { name: \"2018\" },\n        { name: \"2017\" },\n        { name: \"2016\" },\n        { name: \"2015\" },\n        { name: \"2014\" },\n        { name: \"2013\" },\n        { name: \"2012\" }\n      ],\n      gas: [{ name: \"汽油\" }, { name: \"柴油\" }],\n      automode: [{ name: \"自动\" }, { name: \"手动\" }],\n      seats: [{ name: \"2\" }, { name: \"4\" }, { name: \"7\" }],\n      image: []\n    };\n  },\n\n  methods: {\n    chooseBrand(x) {\n      this.brand.name = x.name;\n      this.display_brand = this.brand.name;\n    },\n\n    chooseYear(x) {\n      this.year.name = x.name;\n      this.display_year = this.year.name;\n    },\n\n    chooseGas(x) {\n      this.gas.name = x.name;\n      this.display_gas = this.gas.name;\n    },\n\n    chooseAutomode(x) {\n      this.automode.name = x.name;\n      this.display_automode = this.automode.name;\n    },\n\n    chooseSeats(x) {\n      this.seats.name = x.name;\n      this.display_seats = this.seats.name;\n    },\n\n    switchActionSheet(param) {\n      this[`${param}`] = !this[`${param}`];\n    },\n\n    chooseItemAgeSpec(itemParams) {\n      this.agespec = itemParams.name;\n    },\n\n    imgMsg: data => {\n      if (data.code == 1) {\n        alert(\"upload\");\n      }\n      console.log(data.msg[0]); //code 1 自动上传  2 不上传只展示图片  3 删除图片  4 预览图片\n      let file = data.msg[0];\n      var storageRef = firebase.storage().ref(\"car_img/\" + file.name);\n\n      let uploadTask = storageRef.put(file);\n\n      uploadTask.on(\n        \"state_changed\",\n        snapshot => {\n          //run after upload img\n        },\n        error => {\n          // Handle unsuccessful uploads\n        },\n        () => {\n          // Handle successful uploads on complete\n          // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n          uploadTask.snapshot.ref.getDownloadURL().then(downloadURL => {\n            this.image.push(downloadURL);\n            console.log(\"File avaliable at\", downloadURL);\n          });\n        }\n      );\n    },\n\n    saveCar() {\n      db.collection(\"car_info\")\n        .add({\n          car_brand: this.display_brand,\n          car_year: this.display_year,\n\n          car_id: this.car_id,\n          car_Vin: this.car_Vin,\n          car_automode: this.display_automode,\n\n          car_engine: this.car_engine,\n          car_fpay: this.car_fpay,\n          car_gas: this.display_gas,\n          car_mile: this.car_mile,\n          car_month: this.car_month,\n          car_mpay: this.car_mpay,\n          car_seats: this.display_seats,\n          car_type: this.car_type,\n\n          contact_location: this.contact_location,\n          contact_name: this.contact_name,\n          contact_phone: this.contact_phone,\n          contact_time: this.contact_time\n        })\n        .then(decRef => {\n          window.history.length > 1\n            ? this.$router.go(-1)\n            : this.$router.push(\"/mainPage\");\n          alert(\"success!\");\n        })\n        .catch(error => console.log(err));\n\n      firestore\n        .collection(\"car_img\")\n        .add(this.car)\n        .then(docRef => {\n          console.log(docRef.id);\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    }\n  }\n};\n",{"version":3,"sources":["lease.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuMA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"lease.vue","sourceRoot":"src/components/sellform","sourcesContent":["<template>\n  <div class=\"textinput-demo\">\n    <!--基本信息-->\n    <form @submit.prevent=\"saveCar\">\n      <h4>基本信息</h4>\n\n      <nut-cell :showIcon=\"true\" :isLink=\"true\" @click.native=\"switchActionSheet('isVisible1')\">\n        <div class=\"left\" slot=\"title\">\n          <label>品牌</label>\n        </div>\n        <div slot=\"desc\" class=\"selected-option\">{{display_brand}}</div>\n      </nut-cell>\n      <nut-cell :showIcon=\"true\" :isLink=\"true\" @click.native=\"switchActionSheet('isVisible2')\">\n        <div class=\"left\" slot=\"title\">\n          <label>年份</label>\n        </div>\n        <div slot=\"desc\" class=\"selected-option\">{{display_year}}</div>\n      </nut-cell>\n\n      <nut-cell>\n        <span slot=\"title\">\n          <nut-textinput placeholder=\"请输入内容\" v-model=\"car_fpay\" label=\"首付拿回：\" :hasBorder=\"false\" />\n        </span>\n      </nut-cell>\n      <nut-cell>\n        <span slot=\"title\">\n          <nut-textinput placeholder=\"请输入内容\" v-model=\"car_mpay\" label=\"月供：\" :hasBorder=\"false\" />\n        </span>\n      </nut-cell>\n      <nut-cell>\n        <span slot=\"title\">\n          <nut-textinput\n            placeholder=\"请输入内容\"\n            v-model=\"car_month\"\n            label=\"剩余时间(月)：\"\n            :hasBorder=\"false\"\n          />\n        </span>\n      </nut-cell>\n      <nut-cell>\n        <span slot=\"title\">\n          <nut-textinput placeholder=\"请输入内容\" v-model=\"car_mile\" label=\"剩余公里数：\" :hasBorder=\"false\" />\n        </span>\n      </nut-cell>\n\n      <!--高级信息-->\n      <h4>高级信息</h4>\n      <div>\n        <nut-cell>\n          <span slot=\"title\">\n            <nut-textinput placeholder=\"请输入内容\" v-model=\"car_type\" label=\"型号：\" :hasBorder=\"false\" />\n          </span>\n        </nut-cell>\n        <nut-cell>\n          <span slot=\"title\">\n            <nut-textinput\n              placeholder=\"请输入内容\"\n              v-model=\"car_engine\"\n              label=\"发动机：\"\n              :hasBorder=\"false\"\n            />\n          </span>\n        </nut-cell>\n        <nut-cell :showIcon=\"true\" :isLink=\"true\" @click.native=\"switchActionSheet('isVisible3')\">\n          <div class=\"left\" slot=\"title\">\n            <label>燃料</label>\n          </div>\n          <div slot=\"desc\" class=\"selected-option\">{{display_gas}}</div>\n        </nut-cell>\n        <nut-cell :showIcon=\"true\" :isLink=\"true\" @click.native=\"switchActionSheet('isVisible4')\">\n          <div class=\"left\" slot=\"title\">\n            <label>驱动</label>\n          </div>\n          <div slot=\"desc\" class=\"selected-option\">{{display_automode}}</div>\n        </nut-cell>\n        <nut-cell :showIcon=\"true\" :isLink=\"true\" @click.native=\"switchActionSheet('isVisible5')\">\n          <div class=\"left\" slot=\"title\">\n            <label>座位数</label>\n          </div>\n          <div slot=\"desc\" class=\"selected-option\">{{display_seats}}</div>\n        </nut-cell>\n        <nut-cell>\n          <span slot=\"title\">\n            <nut-textinput\n              placeholder=\"请输入内容\"\n              v-model=\"car_Vin\"\n              label=\"Vin Number：\"\n              :hasBorder=\"false\"\n            />\n          </span>\n        </nut-cell>\n      </div>\n\n      <!--联系方式-->\n      <h4>联系方式</h4>\n\n      <nut-cell>\n        <span slot=\"title\">\n          <nut-textinput\n            placeholder=\"请输入内容\"\n            v-model=\"contact_name\"\n            label=\"联系人称呼\"\n            :hasBorder=\"false\"\n          />\n        </span>\n      </nut-cell>\n      <nut-cell>\n        <span slot=\"title\">\n          <nut-textinput\n            placeholder=\"请输入内容\"\n            v-model=\"contact_phone\"\n            label=\"联系电话\"\n            :hasBorder=\"false\"\n          />\n        </span>\n      </nut-cell>\n      <nut-cell>\n        <span slot=\"title\">\n          <nut-textinput\n            placeholder=\"请输入内容\"\n            v-model=\"contact_time\"\n            label=\"验车时间\"\n            :hasBorder=\"false\"\n          />\n        </span>\n      </nut-cell>\n      <nut-cell>\n        <span slot=\"title\">\n          <nut-textinput\n            placeholder=\"请输入内容\"\n            v-model=\"contact_location\"\n            label=\"验车地点\"\n            :hasBorder=\"false\"\n          />\n        </span>\n      </nut-cell>\n\n      <h4>\n        上传图片\n        <span>(*最多上传6张)</span>\n      </h4>\n      <div class=\"last\">\n        <nut-imagepicker class=\"img-container\" @imgMsg=\"imgMsg\" :max=\"6\"></nut-imagepicker>\n      </div>\n\n      <button type=\"submit\" class=\"submit\">\n        <span>submit</span>\n      </button>\n      <router-link to=\"/\">\n        <button class=\"cancel\">\n          <span>cancel</span>\n        </button>\n      </router-link>\n    </form>\n\n    <!-- demo(带取消按钮） -->\n    <nut-actionsheet\n      :is-visible=\"isVisible1\"\n      @close=\"switchActionSheet('isVisible1')\"\n      cancelTxt=\"取消\"\n      :menu-items=\"brand\"\n      @choose=\"chooseBrand\"\n    ></nut-actionsheet>\n\n    <nut-actionsheet\n      :is-visible=\"isVisible2\"\n      @close=\"switchActionSheet('isVisible2')\"\n      cancelTxt=\"取消\"\n      :menu-items=\"year\"\n      @choose=\"chooseYear\"\n    ></nut-actionsheet>\n\n    <nut-actionsheet\n      :is-visible=\"isVisible3\"\n      @close=\"switchActionSheet('isVisible3')\"\n      cancelTxt=\"取消\"\n      :menu-items=\"gas\"\n      @choose=\"chooseGas\"\n    ></nut-actionsheet>\n\n    <nut-actionsheet\n      :is-visible=\"isVisible4\"\n      @close=\"switchActionSheet('isVisible4')\"\n      cancelTxt=\"取消\"\n      :menu-items=\"automode\"\n      @choose=\"chooseAutomode\"\n    ></nut-actionsheet>\n\n    <nut-actionsheet\n      :is-visible=\"isVisible5\"\n      @close=\"switchActionSheet('isVisible5')\"\n      cancelTxt=\"取消\"\n      :menu-items=\"seats\"\n      @choose=\"chooseSeats\"\n    ></nut-actionsheet>\n  </div>\n</template>\n\n<script>\nimport { firestore } from \"../firebase/firestore\";\nimport firebase from \"firebase\";\nimport db from \"../firebase/firebaseinit\";\n\nexport default {\n  data() {\n    return {\n      car_id: null,\n      car_Vin: null,\n      car_engine: null,\n      car_fpay: null,\n      car_mile: null,\n      car_month: null,\n      car_mpay: null,\n      car_type: null,\n      contact_location: null,\n      contact_name: null,\n      contact_phone: null,\n      contact_time: null,\n\n      display_brand: \"请选择\",\n      display_year: \"请选择\",\n      display_gas: \"请选择\",\n      display_automode: \"请选择\",\n      display_seats: \"请选择\",\n\n      isVisible1: false,\n      isVisible2: false,\n      isVisible3: false,\n      isVisible4: false,\n      isVisible5: false,\n\n      brand: [{ name: \"benz\" }, { name: \"bmw\" }, { name: \"audi\" }],\n      year: [\n        { name: \"2019\" },\n        { name: \"2018\" },\n        { name: \"2017\" },\n        { name: \"2016\" },\n        { name: \"2015\" },\n        { name: \"2014\" },\n        { name: \"2013\" },\n        { name: \"2012\" }\n      ],\n      gas: [{ name: \"汽油\" }, { name: \"柴油\" }],\n      automode: [{ name: \"自动\" }, { name: \"手动\" }],\n      seats: [{ name: \"2\" }, { name: \"4\" }, { name: \"7\" }],\n      image: []\n    };\n  },\n\n  methods: {\n    chooseBrand(x) {\n      this.brand.name = x.name;\n      this.display_brand = this.brand.name;\n    },\n\n    chooseYear(x) {\n      this.year.name = x.name;\n      this.display_year = this.year.name;\n    },\n\n    chooseGas(x) {\n      this.gas.name = x.name;\n      this.display_gas = this.gas.name;\n    },\n\n    chooseAutomode(x) {\n      this.automode.name = x.name;\n      this.display_automode = this.automode.name;\n    },\n\n    chooseSeats(x) {\n      this.seats.name = x.name;\n      this.display_seats = this.seats.name;\n    },\n\n    switchActionSheet(param) {\n      this[`${param}`] = !this[`${param}`];\n    },\n\n    chooseItemAgeSpec(itemParams) {\n      this.agespec = itemParams.name;\n    },\n\n    imgMsg: data => {\n      if (data.code == 1) {\n        alert(\"upload\");\n      }\n      console.log(data.msg[0]); //code 1 自动上传  2 不上传只展示图片  3 删除图片  4 预览图片\n      let file = data.msg[0];\n      var storageRef = firebase.storage().ref(\"car_img/\" + file.name);\n\n      let uploadTask = storageRef.put(file);\n\n      uploadTask.on(\n        \"state_changed\",\n        snapshot => {\n          //run after upload img\n        },\n        error => {\n          // Handle unsuccessful uploads\n        },\n        () => {\n          // Handle successful uploads on complete\n          // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n          uploadTask.snapshot.ref.getDownloadURL().then(downloadURL => {\n            this.image.push(downloadURL);\n            console.log(\"File avaliable at\", downloadURL);\n          });\n        }\n      );\n    },\n\n    saveCar() {\n      db.collection(\"car_info\")\n        .add({\n          car_brand: this.display_brand,\n          car_year: this.display_year,\n\n          car_id: this.car_id,\n          car_Vin: this.car_Vin,\n          car_automode: this.display_automode,\n\n          car_engine: this.car_engine,\n          car_fpay: this.car_fpay,\n          car_gas: this.display_gas,\n          car_mile: this.car_mile,\n          car_month: this.car_month,\n          car_mpay: this.car_mpay,\n          car_seats: this.display_seats,\n          car_type: this.car_type,\n\n          contact_location: this.contact_location,\n          contact_name: this.contact_name,\n          contact_phone: this.contact_phone,\n          contact_time: this.contact_time\n        })\n        .then(decRef => {\n          window.history.length > 1\n            ? this.$router.go(-1)\n            : this.$router.push(\"/mainPage\");\n          alert(\"success!\");\n        })\n        .catch(error => console.log(err));\n\n      firestore\n        .collection(\"car_img\")\n        .add(this.car)\n        .then(docRef => {\n          console.log(docRef.id);\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.textinput-demo {\n  padding-left: 0;\n  padding-right: 0;\n  font-size: 0.8rem;\n}\n.textinput-demo h4 {\n  padding: 0 10px;\n}\n\n.left {\n  text-align: left;\n}\n\nh4 {\n  text-align: left;\n  margin-top: 10%;\n  font-size: 0.9rem;\n}\n.last {\n  margin-top: 10%;\n  margin-bottom: 10%;\n}\n.submit {\n  width: 50%;\n  float: left;\n  background-color: rgb(246, 98, 64);\n  border-radius: 1% 1% 1% 1%;\n  color: white;\n  padding: 2%;\n}\n\n.cancel {\n  width: 50%;\n  float: right;\n  background-color: rgb(0, 178, 238);\n  border-radius: 1% 1% 1% 1%;\n  color: white;\n  padding: 2%;\n}\n\n.submit span {\n  font-size: 0.9rem;\n  font-weight: 600;\n}\n\n.cancel span {\n  font-size: 0.9rem;\n  font-weight: 600;\n}\n</style>\n\n"]}]}